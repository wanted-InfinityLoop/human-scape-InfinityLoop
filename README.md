# ğŸŠ Wanted X Wecode PreOnBoarding Backend Course | ë¬´í•œë£¨í”„ íŒ€

ì›í‹°ë“œ 3ì£¼ì°¨ ê¸°ì—… ê³¼ì œ : Human Scape Assignment Project
âœ… íœ´ë¨¼ ìŠ¤ì¼€ì´í”„ ê¸°ì—… ê³¼ì œì…ë‹ˆë‹¤.

- [íœ´ë¨¼ ìŠ¤ì¼€ì´í”„ ì‚¬ì´íŠ¸](https://humanscape.io/kr/index.html)
- [íœ´ë¨¼ ìŠ¤ì¼€ì´í”„ ì±„ìš©ê³µê³  ë§í¬](https://www.wanted.co.kr/wd/41413)

<br>
<br>

# ğŸ”– ëª©ì°¨

- Team ì†Œê°œ
- ê³¼ì œ ë‚´ìš©
- ê¸°ìˆ  í™˜ê²½ ë° tools
- ëª¨ë¸ë§ ERD
- API ëª…ì„¸ ë° ê¸°ëŠ¥ ì„¤ëª…
- ì„¤ì¹˜ ë° ì‹¤í–‰ ë°©ë²•

<br>
<br>

# ğŸ§‘â€ğŸ¤â€ğŸ§‘ Team ì†Œê°œ

|                      ì´ë¦„                      |                                    ë‹´ë‹¹ ê¸°ëŠ¥                                    | ë¸”ë¡œê·¸ |
| :--------------------------------------------: | :-----------------------------------------------------------------------------: | :----: |
|                      ê³µí†µ                      | ì´ˆê¸°í™˜ê²½ ì„¤ì •, DB ëª¨ë¸ë§, postman api ë¬¸ì„œ ì‘ì„±, README.md ì‘ì„±, ë°°í¬, UnitTest |   X    |
|       [ìœ ë™í—Œ](https://github.com/dhhyy)       |                              ì„ìƒ ì •ë³´ ë¦¬ìŠ¤íŠ¸ API                               |        |
|     [í•˜ì˜ˆì¤€](https://github.com/TedJunny)      |                            ì„ìƒì •ë³´ ìˆ˜ì§‘ batch task                             |        |
| [ì˜¤ì§€ìœ¤(íŒ€ì¥)](https://github.com/Odreystella) |                             ì„ìƒ ì •ë³´ ìƒì„¸ ì¡°íšŒ API                             |        |
|      [ì†¡ì¹˜í—Œ](https://github.com/Oraange)      |                            ì„ìƒì •ë³´ ìˆ˜ì§‘ batch task                             |        |

<br>
<br>

# ğŸ“– ê³¼ì œ ë‚´ìš©

### **[ í•„ìˆ˜ í¬í•¨ ì‚¬í•­ ]**

- README ì‘ì„±
  - í”„ë¡œì íŠ¸ ë¹Œë“œ, ìì„¸í•œ ì‹¤í–‰ ë°©ë²• ëª…ì‹œ
  - êµ¬í˜„ ë°©ë²•ê³¼ ì´ìœ ì— ëŒ€í•œ ê°„ëµí•œ ì„¤ëª…
  - ì™„ë£Œëœ ì‹œìŠ¤í…œì´ ë°°í¬ëœ ì„œë²„ì˜ ì£¼ì†Œ
  - Swaggerë‚˜ Postmanì„ í†µí•œ API í…ŒìŠ¤íŠ¸í• ë•Œ í•„ìš”í•œ ìƒì„¸ ë°©ë²•
  - í•´ë‹¹ ê³¼ì œë¥¼ ì§„í–‰í•˜ë©´ì„œ íšŒê³  ë‚´ìš© ë¸”ë¡œê·¸ í¬ìŠ¤íŒ…
- Swaggerë‚˜ Postmanì„ ì´ìš©í•˜ì—¬ API í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•˜ë„ë¡ êµ¬í˜„

### **[ ê°œë°œ ìš”êµ¬ ì‚¬í•­ ]**

- ORM ì‚¬ìš© í•„ìˆ˜
- DB SQLite ì‚¬ìš©
- êµ¬í˜„ ê¸°ëŠ¥

  - ì„ìƒì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ëŠ” batch task

    - ì°¸ê³ : [ê³µê³µë°ì´í„° í¬í„¸ í˜ì´ì§€](https://www.data.go.kr/data/3074271/fileData.do#/APIëª©ë¡/GETuddi%3Acfc19dda-6f75-4c57-86a8-bb9c8b103887)

  - ìˆ˜ì§‘í•œ ì„ìƒì •ë³´ì— ëŒ€í•œ API

    - íŠ¹ì • ì„ìƒì •ë³´ ì½ê¸°(í‚¤ ê°’ì€ ììœ )

  - ìˆ˜ì§‘í•œ ì„ìƒì •ë³´ ë¦¬ìŠ¤íŠ¸ API
    - ìµœê·¼ ì¼ì£¼ì¼ë‚´ì— ì—…ë°ì´íŠ¸(ë³€ê²½ì‚¬í•­ì´ ìˆëŠ”) ëœ ì„ìƒì •ë³´ ë¦¬ìŠ¤íŠ¸
      - pagination ê¸°ëŠ¥

### **[ ê°€ì‚°ì  ]**

- Unit testì˜ êµ¬í˜„
- ë°°í¬í•˜ì—¬ ì›¹ì—ì„œ ì‚¬ìš© í•  ìˆ˜ ìˆë„ë¡ ì œê³µ
- ì„ìƒì •ë³´ ê²€ìƒ‰ API ì œê³µ

<br>
<br>

# â¡ï¸ Build(AWS EC2)

API URL : http://18.216.91.118:8000

<br>
<br>

# âš’ï¸ ê¸°ìˆ  í™˜ê²½ ë° tools

- Back-End: `Python 3.9.7`, `Django 3.2.9`
- Database: `Sqlite3`
- Deploy: `AWS EC2`
- ETC: `Git`, `Github`, `Postman`

<br>
<br>

# ğŸ“‹ ëª¨ë¸ë§ ERD

[Aquerytool URL](https://aquerytool.com/aquerymain/index/?rurl=dde567a2-e41b-431c-b323-05e75d42c47c&)  
Password : dm612s

![db](https://user-images.githubusercontent.com/77820352/141988846-fef565eb-b6cb-4e97-b71d-bf2608c56f2d.png)

<br>
<br>

# ğŸŒ² ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
.
â”œâ”€â”€ config
â”‚   â”œâ”€â”€ asgi.py
â”‚   â”œâ”€â”€ settings.py
â”‚   â”œâ”€â”€ urls.py
â”‚   â””â”€â”€ wsgi.py
â”œâ”€â”€ core
â”‚   â”œâ”€â”€ admin.py
â”‚   â”œâ”€â”€ apps.py
â”‚   â”œâ”€â”€ cron.py
â”‚   â”œâ”€â”€ models.py
â”‚   â”œâ”€â”€ openapi.py
â”‚   â”œâ”€â”€ tests.py
â”‚   â”œâ”€â”€ utils.py
â”‚   â””â”€â”€ views.py
â”œâ”€â”€ clinics
â”‚   â”œâ”€â”€ admin.py
â”‚   â”œâ”€â”€ apps.py
â”‚   â”œâ”€â”€ models.py
â”‚   â”œâ”€â”€ tests.py
â”‚   â”œâ”€â”€ urls.py
â”‚   â””â”€â”€ views.py
â”œâ”€â”€ manage.py
â”œâ”€â”€ db.sqlite3
â”œâ”€â”€ my_settings.py
â”œâ”€â”€ CONVENTION.md
â”œâ”€â”€ PULL_REQUEST_TEMPLATE.md
â”œâ”€â”€ README.md
â””â”€â”€ requirements.txt
```

<br>
<br>

# ğŸ”– API ëª…ì„¸ì„œ

[Postman API Document ë³´ëŸ¬ê°€ê¸°](https://documenter.getpostman.com/view/18212819/UVCB94M3)

<br>

### ğŸ‘‰ ì„ìƒì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ëŠ” batch task

1. `my_settings.py`ì— `OPEN_API_KEY`ë¼ê³  í‚¤ë¥¼ ì •ì˜í•˜ì—¬, ê³µê³µ APIë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
2. ë§¤ì¼ ìì •ì— í¬ë¡ ì¡ì´ í™œì„±í™”ë©ë‹ˆë‹¤.
3. `python manage.py crontab add` ëª…ë ¹ì–´ë¡œ í¬ë¡ ì¡ì„ í™œì„±í™”í•©ë‹ˆë‹¤.
4. `python manage.py crontab show` ëª…ë ¹ì–´ë¡œ í¬ë¡ ì¡ì˜ ëª©ë¡ì„ í™•ì¸í•©ë‹ˆë‹¤.
5. `python manage.py crontab remove` ëª…ë ¹ì–´ë¡œ í¬ë¡ ì¡ì˜ ëª©ë¡ì„ ì‚­ì œí•©ë‹ˆë‹¤.

<br>

### ğŸ‘‰ ì„ìƒ ì •ë³´ ìƒì„¸ ì¡°íšŒ API

1. `path parameter`ì— í•´ë‹¹í•˜ëŠ” ì„ìƒ ì •ë³´ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.
2. í•´ë‹¹í•˜ëŠ” ì„ìƒ ì •ë³´ê°€ ì—†ìœ¼ë©´ ë°ì´í„°ê°€ ì—†ë‹¤ëŠ” ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
3. `is_active`ë¼ëŠ” í•„ë“œë¥¼ ë‘ì–´ `False` ì´ë©´ ì‚­ì œëœ ë°ì´í„°ë¼ê³  ê°„ì£¼í•˜ê³  ë³´ì—¬ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤.

- Method: GET

```
http://18.216.91.118:8000/clinics/C160045
```

- parameter : path_parameter

- response

```
{
  "data": {
    "name": "ë§Œì„±ë‡Œí˜ˆê´€ì§ˆí™˜ ë°”ì´ì˜¤ë±…í¬ ì»¨ì†Œì‹œì—„ ìš´ì˜ì‚¬ì—…",
    "id": "C160045",
    "duration": "5ë…„",
    "scope": "êµ­ë‚´ë‹¤ê¸°ê´€",
    "type": "ê¸°íƒ€",
    "institution": null,
    "trial": "",
    "subjects": 765,
    "department": "Psychiatry",
    "updated_at": "2021-11-16 22:09:04"
  }
}

```

<br>

### ğŸ‘‰ ì„ìƒ ì •ë³´ ëª©ë¡ API

1. `query_parameter`ì—ì„œ ê°€ì ¸ì˜¨ í˜ì´ì§€ì— í•´ë‹¹í•˜ëŠ” ì¼ì£¼ì¼ ì´ë‚´ ê°±ì‹ ëœ ì„ìƒ ì •ë³´ì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.
2. ê¸°ë³¸ì ìœ¼ë¡œ í•œ í˜ì´ì§€ì— 10ê°œì˜ ì„ìƒì •ë³´ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.
3. ì¼ì£¼ì¼ ì´ë‚´ ê°±ì‹ ëœ ì„ìƒ ì •ë³´ê°€ ì—†ê³ , `is_active`ê°€ `False` ì´ë©´ ë°ì´í„°ê°€ ì—†ë‹¤ëŠ” ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
4. `is_active`ë¼ëŠ” í•„ë“œë¥¼ ë‘ì–´ `False` ì´ë©´ ì‚­ì œëœ ë°ì´í„°ë¼ê³  ê°„ì£¼í•˜ê³  ë³´ì—¬ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤.

- Method: GET

```
http://18.216.91.118:8000/clinics/list?page=1
```

- parameter : query_parameter

- response

```
{
  "result": {
    "data": [
      {
        "name": "ì¡°ì§êµ¬ì¦ì‹ì¦ ì„ìƒì—°êµ¬ ë„¤íŠ¸ì›Œí¬ êµ¬ì¶• ë° ìš´ì˜(HLH)",
        "id": "C130010",
        "duration": "3ë…„",
        "scope": "êµ­ë‚´ë‹¤ê¸°ê´€",
        "type": "ê´€ì°°ì—°êµ¬",
        "institution": null,
        "trial": "ì½”í˜¸íŠ¸",
        "subjects": 120,
        "department": "Pediatrics",
        "updated_at": "2021-11-16 22:09:03"
      },
      {
        "name": "ëŒ€í•œë¯¼êµ­ ì‡¼ê·¸ë Œ ì¦í›„êµ° ì½”í˜¸íŠ¸ êµ¬ì¶•",
        "id": "C130011",
        "duration": "6ë…„",
        "scope": "êµ­ë‚´ë‹¤ê¸°ê´€",
        "type": "ê´€ì°°ì—°êµ¬",
        "institution": null,
        "trial": "ì½”í˜¸íŠ¸",
        "subjects": 500,
        "department": "Rheumatology",
        "updated_at": "2021-11-16 22:09:03"
      },

      ...

      {
        "name": "ì§€ì†ì„±ì™¸ë˜ë³µë§‰íˆ¬ì„(CAPD) ë° ìë™ë³µë§‰íˆ¬ì„(APD) í™˜ìì˜ ì‚¶ì˜ ì§ˆ(QOL)ì„ ë¹„êµí•˜ê¸° ìœ„í•œ, ì „í–¥ì , ë‹¤ê¸°ê´€, ê´€ì°°ì—°êµ¬",
        "id": "C110004",
        "duration": "12ê°œì›”",
        "scope": "êµ­ë‚´ë‹¤ê¸°ê´€",
        "type": "ì¤‘ì¬ìŠì—°êµ¬",
        "institution": null,
        "trial": "Phase 4",
        "subjects": 300,
        "department": "Nephrology",
        "updated_at": "2021-11-16 22:09:03"
      },
      {
        "name": "ì œ2í˜• ë‹¹ë‡¨ë³‘ ì„ìƒì—°êµ¬ë„¤íŠ¸ì›Œí¬ êµ¬ì¶•ì‚¬ì—…",
        "id": "C140014",
        "duration": "120ê°œì›”",
        "scope": "êµ­ë‚´ë‹¤ê¸°ê´€",
        "type": "ê´€ì°°ì—°êµ¬",
        "institution": null,
        "trial": "ì½”í˜¸íŠ¸",
        "subjects": 700,
        "department": "Endocrinology",
        "updated_at": "2021-11-16 22:09:03"
      }
    ],
    "general_information": {
      "count": 10,
      "total_count": 145,
      "page": 1,
      "total_page": 15,
      "per_page": 10
    }
  }
}

```

<br>

### ğŸ‘‰ ìœ ë‹› í…ŒìŠ¤íŠ¸ ê²°ê³¼

![í…ŒìŠ¤íŠ¸ ê²°ê³¼](https://user-images.githubusercontent.com/77820352/142019330-04708472-ad63-419c-b6d1-2f1aab6eb54e.png)

- ì„ìƒ ì •ë³´ ìƒì„¸ ì¡°íšŒ API, ì„ìƒ ì •ë³´ ëª©ë¡ ì¡°íšŒ API í…ŒìŠ¤íŠ¸ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.
- ê° APIì— ëŒ€í•œ ì„±ê³µ / ì‹¤íŒ¨ í…ŒìŠ¤íŠ¸ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.

<br>
<br>

# ğŸ”– ì„¤ì¹˜ ë° ì‹¤í–‰ ë°©ë²•

### ë¡œì»¬ ë° í…ŒìŠ¤íŠ¸ìš©

1. í•´ë‹¹ í”„ë¡œì íŠ¸ë¥¼ `clone`í•˜ê³ , í”„ë¡œì íŠ¸ë¡œ ë“¤ì–´ê°„ë‹¤.

```shell
$ git clone https://github.com/wanted-InfinityLoop/human-scape-InfinityLoop.git .
$ cd human-scape-InfinityLoop
```

2. ê°€ìƒí™˜ê²½ìœ¼ë¡œ `miniconda`ë¥¼ ì„¤ì¹˜í•œë‹¤. [Go](https://docs.conda.io/en/latest/miniconda.html)

```shell
$ conda create -n humanscape python=3.9
$ conda actvate humanscape
```

3. ê°€ìƒí™˜ê²½ ìƒì„± í›„, `requirements.txt`ì— ëª…ì‹œëœ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•œë‹¤.

```shell
$ pip install -r requirements.txt
```

```shell
# requirements.txt

bcrypt==3.2.0
Django==3.2.9
django-cors-headers==3.10.0
gunicorn==20.1.0
django-crontab==0.7.1
requests==2.26.0
```

4. migrate í›„ ë¡œì»¬ ì„œë²„ ê°€ë™
   > ëŸ°ì„œë²„ ì‹¤í–‰ì„ ìœ„í•´ my_settings.pyì—ì„œ MY_SECRET_KEYë¥¼ ì •ì˜í•˜ì˜€ìŠµë‹ˆë‹¤.

```shell
$ python manage.py migrate
$ python manage.py runserver
```
